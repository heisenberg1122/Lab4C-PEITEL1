<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Users List</title>
</head>
<body>
  <div class="top">
    <h1 style="margin:0; color:#2d3748;">All Users</h1>
    
    <div class="top-actions">
       <a href="{% url 'registration:user_create_html' %}" class="button btn-add">+ Add User</a>

       <span style="color:#4a5568; margin: 0 15px;">
           Logged in as <strong>{{ request.session.user_name }}</strong>
       </span>
       
       <a href="{% url 'registration:logout_html' %}" class="button btn-logout">Logout</a>
    </div>
  </div>

  <table>
    <thead>
      <tr>
        <th>Profile</th> 
        <th>Username</th>
        <th>First name</th>
        <th>Last name</th>
        <th>Email</th>
        <th>Date Joined</th>
        <th>Actions</th> 
      </tr>
    </thead>
    <tbody>
      {% for u in users %}
      <tr>
        <td>
            {% if u.profile_picture %}
                <img src="{{ u.profile_picture.url }}" class="avatar" alt="Profile">
            {% else %}
                <img src="https://ui-avatars.com/api/?name={{ u.first_name }}+{{ u.last_name }}&background=random&color=fff&size=40" class="avatar" alt="Profile">
            {% endif %}
        </td>
        
        <td>{{ u.username }}</td> <td>{{ u.first_name }}</td>
        <td>{{ u.last_name }}</td>
        <td>{{ u.email }}</td>
        <td>{{ u.date_joined|date:"Y-m-d" }}</td> <td>
            <a href="{% url 'registration:user_update_html' u.id %}" class="action-link edit">Edit</a>
            <a href="{% url 'registration:user_delete_html' u.id %}" class="action-link delete">Delete</a>
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="7" style="text-align:center; padding: 20px;">No users found.</td></tr>
      {% endfor %}
    </tbody>
  </table>

  <style>
    body { font-family: Arial, sans-serif; padding:24px; background:#f7f9fc; }
    
    /* Top Header Layout */
    .top { display:flex; justify-content:space-between; align-items:center; margin-bottom:16px; }
    .top-actions { display: flex; align-items: center; }

    /* Table Styles */
    table { width:100%; border-collapse:collapse; background:white; border-radius:8px; overflow:hidden; box-shadow:0 6px 18px rgba(0,0,0,0.04); }
    th, td { padding:12px 16px; text-align:left; border-bottom:1px solid #f0f0f0; vertical-align: middle; }
    th { background:#eef3fb; font-weight:700; color: #333; }
    tr:hover td { background:#fbfdff; }

    /* Profile Avatar Image */
    .avatar { border-radius: 50%; width: 40px; height: 40px; object-fit: cover; }

    /* Button Styles */
    .button { padding:8px 12px; color:white; border-radius:6px; text-decoration:none; font-size: 14px; display: inline-block; }
    
    /* Specific Colors */
    .btn-logout { background:#e53e3e; } /* Red */
    .btn-logout:hover { background:#c53030; }
    
    .btn-add { background:#38a169; margin-right: 15px; } /* Green */
    .btn-add:hover { background:#2f855a; }

    /* Action Links (Edit/Delete) */
    .action-link { text-decoration: none; font-size: 13px; margin-right: 8px; font-weight: bold; }
    .edit { color: #3182ce; }
    .edit:hover { text-decoration: underline; }
    .delete { color: #e53e3e; }
    .delete:hover { text-decoration: underline; }
  </style>
</body>
</html>